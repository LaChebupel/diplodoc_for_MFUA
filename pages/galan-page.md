# Выгрузка результатов опросных форм 

## 1. Назначение сервиса 
   Данный сервис предназначен для автоматизации выгрузки результатов опросных форм в 1С с последующим составлением из них Отчетов.

## 2. URL расположения UI сервиса 
   Данный сервис не имеет UI на стороне портала. Но сами результаты форм хранятся тут - https://portal.mfua.ru/bitrix/admin/form_list.php?lang=ru

## 3. Компоненты UI с указанием их функции/назначения (страницы, окна, формы) 
   - Страницы - https://portal.mfua.ru/student/surveys/
   - Компонент - bitrix:form.result.new - Отвечает за отображение веб-формы.

## 4. Пользователи сервиса (группы пользователей в ЛК) 
   Сотрудники Центра развития карьеры и трудоустройства

## 5. ИС, с которыми взаимодействует сервис (внутренние/внешние) 
   Внутренний  - Центр развития карьеры и трудоустройства

## 6. Методы, используемые в рамках взаимодействия с ИС (уточнить у разработчика) 
   агент - bitrix - https://portal.mfua.ru/bitrix/admin/agent_edit.php?ID=502523&lang=ru

## 7. Разработчик сервиса
   Cursore под упровлением Егора Ц.А.

## 8. Разработчики методов на стороне ИС (отдел/организация-подрядчик, фио, контакт)
   1С - Гудик Виктория

## 9. Дополнительные Роли сотрудников в рамках сервиса (в 1С/МФЮА24 и других ИС)  
   1С - Элина Ковешникова дополнительный разработчик

## 10. Документы (или другие сущности), задействуемые в процессе обмена с ИС
   Низняю, уточнить у 1С

## 11. Проблемы, нюансы и особенности, влияющие на стабильность работы
   В агенте не предусмотрен учет повторных записей. На стороне 1с их удаляют в ручном\полуручном режиме. Так же,
   не совсем ясно сколько записей за раз он выгружает.

## 12. Заинтересованные стороны: подразделения/сотрудники, чьи цели достигаются указанным сервисом  
   Сергей Сергеевич Галан и весь отдел развития карьеры и трудоустройства.

## 13. Описание алгоритма работы сервиса
   Запуск агента -> Получение результатов, заданной по id, веб-формы -> подгонка результатов под формат нужный для 1С -> Отправка результата в 1С.

### 13.1 Пример структуры данных в формате JSON: 
 ```json
 [
  {
    "SurveyGUID": "9c7a9138-94a2-11f0-80b8-005056aefa3a",
    "QuestionAnswer": [
      {
        "QuestionGUID": "bf5f1c3e-9208-11f0-810e-000c294da1bd",
        "Answer": "Да, я трудоустроен по специальности"
      },
      {
        "QuestionGUID": "bf5f1c3f-9208-11f0-810e-000c294da1bd",
        "Answer": "ООО «Пример»"
      },
      {
        "QuestionGUID": "bf5f1c40-9208-11f0-810e-000c294da1bd",
        "Answer": "Инженер"
      }
    ]
  }
]
```
